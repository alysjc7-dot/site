<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"><title>جدول المباريات</title><style>header{position:sticky;top:0;z-index:999;background:linear-gradient(135deg,#222,#444,#222);color:#fff;display:flex;justify-content:space-between;align-items:center;padding:12px 16px;box-shadow:0 2px 6px rgba(0,0,0,.2);border-bottom:1px solid #fff;margin-bottom:20px;font-family:'Cairo',sans-serif}header i{font-size:22px;cursor:pointer}header h1{margin:0;font-size:20px}.header-buttons{display:flex;gap:10px}.header-buttons a{color:#fff;font-size:22px;text-decoration:none;transition:color .3s}.header-buttons a:hover{color:#cfd8dc}body{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background:#000;margin:0;color:#eee}.date-picker{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:0;user-select:none}.date-picker button{background:linear-gradient(135deg,#222,#444,#222);border:none;color:#eee;padding:10px 16px;border-radius:8px;cursor:pointer;font-size:1.2rem;transition:background-color .3s ease}.date-picker button:hover{background:linear-gradient(135deg,#222,#444,#222)}.date-picker .date-display{font-family:'Cairo',sans-serif;font-weight:700;font-size:1.2rem;min-width:160px;text-align:center;color:#fff;background:linear-gradient(135deg,#222,#444,#222);padding:8px 16px;border-radius:8px;user-select:none}.league{margin-bottom:20px;background:#333;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.7);padding:0;overflow:hidden}.league-header{display:flex;align-items:center;gap:10px;padding:20px 15px;background:linear-gradient(135deg,#222,#444,#222);color:#eee;border-radius:8px 8px 0 0;margin-bottom:0}.league-header h2{color:#fff;font-size:1rem;margin:0;font-family:'Cairo',sans-serif}.league-header img{width:40px;height:40px;object-fit:contain}.match{display:flex;justify-content:space-between;align-items:center;border-top:1px solid #666;padding:12px 0;position:relative;transition:all .2s ease;outline:none!important;cursor:pointer}.match:first-child{border-top:none}.team{display:flex;flex-direction:column;align-items:center;width:110px;cursor:default}.team img{width:50px;height:50px;object-fit:contain;margin-bottom:6px;pointer-events:none}.team-name{font-size:.8rem;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;color:#fff;user-select:none;pointer-events:none;font-family:'Cairo',sans-serif}.center-info{flex:1;max-width:160px;text-align:center;font-weight:600;font-size:1rem;color:#ccc;user-select:none;display:flex;flex-direction:column;align-items:center;gap:6px}.score{font-size:1rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#222,#444,#222);padding:6px 16px;border-radius:25px;min-width:70px;user-select:none;transition:background-color .3s ease;text-shadow:0 0 4px rgba(0,0,0,.5);border:1px solid #1b2733;font-family:'Cairo',sans-serif}.status{margin-top:4px;font-size:.8rem;font-family:'Cairo',sans-serif;user-select:none;padding:3px 5px;border-radius:20px;min-width:80px;text-align:center;transition:all .3s ease;box-shadow:none;border:none;font-weight:600}.status.ended{color:#fff;background-color:#5c6bc0;border:1px solid #3f51b5;box-shadow:0 0 10px #3f51b5aa;font-weight:700;text-shadow:0 0 4px #3949ab;letter-spacing:.5px}.status.live{color:#fff;font-weight:700;background:linear-gradient(270deg,#e74c3c,#c0392b,#e74c3c);background-size:600% 600%;animation:gradientShift 4s ease infinite,blink 1.5s infinite;border:1px solid #c0392b;box-shadow:0 0 12px #e74c3caa;text-shadow:0 0 5px #c0392b}.status.upcoming{color:#fff;background:linear-gradient(45deg,#3498db,#2980b9);border:1px solid #2980b9;box-shadow:0 0 8px #3498dbaa;font-weight:700;text-shadow:0 0 3px #1c5980}.status.postponed{color:#fff;background:linear-gradient(45deg,#f39c12,#d35400);border:1px solid #e67e22;box-shadow:0 0 10px #e67e2288;font-weight:700;text-shadow:0 0 4px #d35400;letter-spacing:.5px}@keyframes blink{0%,100%{opacity:1}50%{opacity:.6}}@keyframes gradientShift{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}#splashScreen{opacity:1;transition:opacity .6s ease;position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#000,#001a11);z-index:99999;display:flex;align-items:center;justify-content:center}#splashScreen i{width:80px;height:80px;font-size:60px;line-height:80px;color:#00ff88}.pure-loader{width:60px;height:60px;border:6px solid #444;border-top:6px solid #fff;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.rotate{animation:spin .6s linear}#matches-container{padding:15px}.match.focused{z-index:10}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.8);z-index:1000;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:all .3s ease}.modal-overlay.active{opacity:1;visibility:visible}.modal-content{background:linear-gradient(135deg,#1a1a1a,#2d2d2d);border-radius:12px;width:95%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 5px 20px rgba(0,0,0,.5);transform:translateY(20px);transition:transform .3s ease;border:1px solid #444}.modal-overlay.active .modal-content{transform:translateY(0)}.modal-header{padding:15px;background:linear-gradient(135deg,#222,#444);border-radius:12px 12px 0 0;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #555}.modal-title{font-family:'Cairo',sans-serif;font-weight:700;font-size:1.2rem;color:#fff;margin:0}.close-modal{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:5px}.modal-body{padding:15px}.tabs-container{display:flex;border-bottom:1px solid #444;margin-bottom:15px;overflow-x:auto}.tab{padding:10px 15px;cursor:pointer;font-family:'Cairo',sans-serif;font-weight:700;color:#aaa;border-bottom:3px solid transparent;transition:all .3s ease;white-space:nowrap}.tab.active{color:#fff;border-bottom-color:#5c6bc0}.tab-content{display:none}.tab-content.active{display:block}.match-details-header{display:flex;flex-direction:column;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #444}.match-teams-container{display:flex;align-items:center;justify-content:center;width:100%;gap:20px}.match-team{display:flex;flex-direction:column;align-items:center;flex:1;max-width:120px}.match-team img{width:50px;height:50px;object-fit:contain;margin-bottom:8px;background:#fff;border-radius:50%;padding:3px;border:2px solid #444}.match-team-name{font-family:'Cairo',sans-serif;font-size:.9rem;font-weight:700;text-align:center;color:#fff;margin-top:3px}.match-score-container{display:flex;flex-direction:column;align-items:center;margin:0 10px}.match-score{font-family:'Cairo',sans-serif;font-size:1.8rem;font-weight:700;color:#fff;margin:0;text-shadow:0 0 8px rgba(255,255,255,.3)}.match-status-container{width:100%;display:flex;justify-content:center;margin-top:10px}.match-status{font-family:'Cairo',sans-serif;font-size:.85rem;padding:6px 20px;border-radius:20px;font-weight:700;text-align:center}.match-status.ended{background:#5c6bc0;color:#fff;border:1px solid #3f51b5;box-shadow:0 0 10px #3f51b5aa}.match-status.live{background:linear-gradient(270deg,#e74c3c,#c0392b,#e74c3c);color:#fff;animation:gradientShift 4s ease infinite,blink 1.5s infinite;border:1px solid #c0392b;box-shadow:0 0 12px #e74c3caa}.match-status.upcoming{background:linear-gradient(45deg,#3498db,#2980b9);color:#fff;border:1px solid #2980b9;box-shadow:0 0 8px #3498dbaa}.match-status.postponed{background:linear-gradient(45deg,#f39c12,#d35400);color:#fff;border:1px solid #e67e22;box-shadow:0 0 10px #e67e2288}.match-info-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:20px}.info-item{background:linear-gradient(135deg,#222,#444,#222);padding:12px;border-radius:8px;border-left:3px solid #999}.info-label{font-family:'Cairo',sans-serif;font-size:1rem;color:#aaa;margin-bottom:5px}.info-value{font-family:'Cairo',sans-serif;font-size:.9rem;color:#fff;font-weight:600}.section-title{font-family:'Cairo',sans-serif;font-size:1rem;color:#fff;margin:20px 0 10px;padding-bottom:5px;border-bottom:1px solid #444}.formations-container{display:flex;justify-content:space-between;gap:20px;margin-bottom:20px}.formation{flex:1;background:linear-gradient(135deg,#222,#444,#222);padding:15px;border-radius:8px}.formation-title{font-family:'Cairo',sans-serif;font-size:.9rem;color:#fff;text-align:center;margin-bottom:10px}.formation-value{font-family:'Cairo',sans-serif;font-size:1.2rem;font-weight:700;text-align:center;margin-bottom:15px;color:#50c878;text-shadow:0 0 5px rgba(0,0,0,.7)}.coach-info{display:flex;align-items:center;gap:10px;margin-top:10px;padding-top:10px;border-top:1px dashed #444}.coach-info img{width:40px;height:40px;border-radius:50%;object-fit:cover}.coach-name{font-family:'Cairo',sans-serif;font-size:.9rem;color:#fff}.players-list{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.player-item{background:linear-gradient(135deg,#222,#444,#222);padding:8px;border-radius:5px;display:flex;align-items:center;gap:8px}.player-item img{width:30px;height:30px;border-radius:50%;object-fit:cover}.player-name{font-family:'Cairo',sans-serif;font-size:.8rem;color:#fff}.player-number{font-family:'Cairo',sans-serif;font-size:.8rem;color:#ffd700;font-weight:700;margin-left:auto;background:rgba(0,0,0,.3);padding:2px 5px;border-radius:3px}.events-container,.stats-container{background:linear-gradient(135deg,#222,#444,#222);padding:15px;border-radius:8px;margin-bottom:20px}.event-item,.stat-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #444}.event-time,.stat-name{font-family:'Cairo',sans-serif;font-size:.8rem;color:#aaa}.event-desc,.stat-value{font-family:'Cairo',sans-serif;font-size:.8rem;color:#fff}.loading-details{text-align:center;padding:30px;font-family:'Cairo',sans-serif;color:#fff}.loading-spinner{border:3px solid #333;border-top:3px solid #eee;border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite;margin:0 auto 15px}.penalty-shootout{background:#2a2a2a;padding:20px;border-radius:12px;margin-bottom:20px;border:1px solid #3a3a3a}.penalty-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:20px}.penalty-team-header{display:flex;flex-direction:column;align-items:center;flex:1}.penalty-team-logo{width:50px;height:50px;object-fit:contain;background:#fff;border-radius:50%;padding:5px;margin-bottom:8px;border:2px solid #444}.penalty-team-name{font-family:'Cairo',sans-serif;font-size:.9rem;font-weight:700;text-align:center;color:#fff;margin-bottom:5px}.penalty-score{font-family:'Cairo',sans-serif;font-size:1.5rem;font-weight:700;color:#fff;background:#8b0000;padding:5px 15px;border-radius:20px;min-width:40px;text-align:center}.penalty-kicks-container{display:flex;gap:10px}.penalty-kicks-column{flex:1;display:flex;flex-direction:column;gap:10px}.penalty-separator{width:2px;background:#444;margin:0 10px}.penalty-kick{display:flex;align-items:center;padding:10px;border-radius:8px;background:#333;transition:all .3s ease}.penalty-kick.scored{background:rgba(91,210,134,.1);border-left:3px solid #5bd286}.penalty-kick.missed{background:rgba(231,76,60,.1);border-left:3px solid #e74c3c}.kick-number{font-family:'Cairo',sans-serif;font-weight:700;color:#aaa;width:20px;text-align:center;font-size:.8rem}.player-info{flex:1;display:flex;align-items:center;gap:10px;padding:0 10px}.player-avatar{width:30px;height:30px;border-radius:50%;object-fit:cover;border:2px solid #444}.player-name{font-family:'Cairo',sans-serif;font-size:.85rem;color:#fff}.kick-result{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem}.penalty-kick.scored .kick-result{background:rgba(91,210,134,.2);color:#5bd286}.penalty-kick.missed .kick-result{background:rgba(231,76,60,.2);color:#e74c3c}.stats-comparison{background:linear-gradient(135deg,#222,#333,#222);border-radius:12px;padding:20px;margin-bottom:20px;border:1px solid #3a3a3a;text-align:center}.stats-header{display:flex;justify-content:center;align-items:center;margin-bottom:25px;gap:40px}.stats-team{display:flex;flex-direction:column;align-items:center;width:120px}.stats-logo{width:50px;height:50px;object-fit:contain;background:#fff;border-radius:50%;padding:5px;margin-bottom:8px;border:2px solid #444}.stats-team-name{font-family:'Cairo',sans-serif;font-size:.9rem;font-weight:700;text-align:center;color:#fff}.home-team .stats-team-name{color:#f44336}.away-team .stats-team-name{color:#1e90ff}.vs-container{background:linear-gradient(135deg,#222,#444);width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid #fff;box-shadow:0 0 15px rgba(0,0,0,.5)}.vs-text{font-family:'Cairo',sans-serif;font-size:1.2rem;font-weight:900;color:#fff;text-shadow:0 0 5px rgba(0,0,0,.7)}.stats-list{display:flex;flex-direction:column;gap:15px}.stat-item{display:flex;flex-direction:column;gap:5px}.stat-row{display:flex;justify-content:center;align-items:center;gap:15px}.stat-name{font-family:'Cairo',sans-serif;font-size:.85rem;color:#bbb;min-width:120px;text-align:center}.stat-value{font-family:'Cairo',sans-serif;font-weight:700;font-size:.9rem;min-width:30px;text-align:center}.home-value{color:#f44336}.away-value{color:#1e90ff}.progress-bar-container{width:100%;height:10px;background:#333;border-radius:5px;overflow:hidden;margin:0 auto;max-width:300px;display:flex}.home-progress{height:100%;background:#f44336;transition:width .3s ease}.away-progress{height:100%;background:#1e90ff;transition:width .3s ease}.match-events-section{margin:25px 0;background:#1a1a1a;border-radius:12px;padding:20px;box-shadow:0 5px 15px rgba(0,0,0,.4);font-family:'Cairo',sans-serif;color:#f0f0f0;border:1px solid #333}.events-line{display:flex;flex-direction:column;gap:15px}.event-item{display:flex;align-items:flex-start;gap:12px;padding:15px;border-radius:8px;background:linear-gradient(135deg,#222,#333,#222);box-shadow:0 3px 8px rgba(0,0,0,.25);transition:all .3s ease;border-right:5px solid}.event-item:hover{transform:translateX(5px);background:#2e2e2e}.event-meta{display:flex;align-items:center;gap:12px;min-width:100px}.event-time{font-weight:700;color:#fff;background:#3a3a3a;padding:3px 8px;border-radius:20px;font-size:.9rem;border:1px solid #444}.event-icon{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#2a2a2a;border:2px solid;font-size:.9rem}.event-content{flex-grow:1}.event-main-info{font-weight:700;font-size:1rem;margin-bottom:5px}.event-type{font-size:.8rem;color:#aaa;text-transform:uppercase;letter-spacing:1px}.goal-icon{color:#4caf50;border-color:#4caf50}.sub-icon{color:#2196f3;border-color:#2196f3}.yellow-card-icon{color:#ffc107;border-color:#ffc107}.red-card-icon{color:#f44336;border-color:#f44336}.penalty-icon{color:#9c27b0;border-color:#9c27b0}.event-item.هدف{border-right-color:#4caf50}.event-item.تبديل-لاعب{border-right-color:#2196f3}.event-item.بطاقة-صفراء{border-right-color:#ffc107}.event-item.بطاقة-حمراء{border-right-color:#f44336}.event-item.ضربة-جزاء{border-right-color:#9c27b0}.substitution-container{display:flex;align-items:center;flex-wrap:wrap;gap:8px}.substitution-out{color:#f44336;font-weight:700}.substitution-arrow{color:#777;margin:0 5px}.substitution-in{color:#4caf50;font-weight:700}.event-player{font-weight:700}.هدف .event-player{color:#4caf50}.تبديل-لاعب .event-player{color:#e0e0e0}.بطاقة-صفراء .event-player{color:#ffc107}.بطاقة-حمراء .event-player{color:#f44336}.ضربة-جزاء .event-player{color:#9c27b0}.event-assist{font-size:.9rem;color:#aaa;margin-left:8px;font-weight:400}.info-label i,.section-title i,.referee-role i,.coach-name i,.player-name i,.penalty-player i{margin-left:5px;width:16px;text-align:center}.event-desc i{margin-left:5px}.penalty-outcome i{margin-right:5px}.fa-trophy{color:#ffd700}.fa-flag{color:#ff6347}.fa-map-marker-alt{color:#ff4500}.fa-calendar-alt{color:#4682b4}.fa-clock{color:#4682b4}.fa-whistle{color:#32cd32}.fa-user-shield{color:#4169e1}.fa-user-friends{color:#6495ed}.fa-video{color:#ff0000}.fa-tv{color:#1e90ff}.fa-satellite-dish{color:#9370db}.fa-microphone-alt{color:#ff69b4}.fa-chess{color:#8b4513}.fa-user-tie{color:#708090}.fa-users{color:#556b2f}.fa-user{color:#708090}.fa-chart-bar{color:#20b2aa}.fa-list-ul{color:#6a5acd}.fa-futbol{color:#32cd32}.fa-exchange-alt{color:#ba55d3}.fa-dot-circle{color:#ff8c00}.fa-crosshairs{color:#dc143c}.fa-check{color:#5bd286}.fa-times{color:#e74c3c}@media (max-width:600px){.match-info-grid{grid-template-columns:1fr}.formations-container{flex-direction:column}.players-list{grid-template-columns:1fr}.penalty-header{flex-direction:column;gap:10px}.penalty-team-header{flex-direction:row;gap:15px}.penalty-kicks-container{flex-direction:column}.penalty-separator{width:100%;height:2px;margin:10px 0}.stats-header{flex-direction:column;gap:15px}.vs-container{transform:rotate(90deg);margin:10px 0}}.referees-container{background:linear-gradient(135deg,#222,#444,#222);padding:15px;border-radius:8px;margin-bottom:20px}.referee-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #666}.referee-role{font-family:'Cairo',sans-serif;font-size:.8rem;color:#aaa}.referee-name{font-family:'Cairo',sans-serif;font-size:.8rem;color:#fff}</style></head><body><div id="splashScreen"><div class="pure-loader"></div></div><header><div class="header-buttons"><span id="refreshIcon" class="refresh-icon"><i class="fa fa-refresh"></i></span></div><h1>جدول المباريات</h1><div class="header-buttons"><a href="go:home"><i class="fas fa-arrow-left"></i></a></div></header><div class="date-picker"><button id="prev-day" aria-label="اليوم السابق">?</button><div class="date-display" id="date-display">تحميل...</div><button id="next-day" aria-label="اليوم التالي">?</button></div><div id="matches-container"></div><div class="modal-overlay" id="matchDetailsModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">تفاصيل المباراة</h3><button class="close-modal" id="closeModal">×</button></div><div class="modal-body" id="modalBody"><div class="loading-details"><div class="loading-spinner"></div><p>جاري تحميل تفاصيل المباراة...</p></div></div></div></div><script>const API_URL="https://ko.best-goal.live/state.php",PROXY="https://corsproxy.io/?",DETAILS_API_URL="https://ko.best-goal.live/state.php?match_id=";let selectedDate=new Date();selectedDate.setHours(0,0,0,0);let currentFocusedMatch=null,lastFocusedMatchId=null,isFirstFocus=!0,matchesList=[],currentMatchDetails=null;function getLocalDateString(e){const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${s}`}function formatArabicDate(e){const t=["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر"],a=e.getDate(),s=t[e.getMonth()],c=e.getFullYear();return`${a} ${s} ${c}`}function updateDateDisplay(){document.getElementById("date-display").textContent=formatArabicDate(selectedDate)}function parseDateFromParts(e,t){if(!e||!t)return null;let[a,s]=t.trim().split(" ");let[c,o]=a.split(":").map(Number);if("م"===s&&c<12)c+=12;if("ص"===s&&12===c)c=0;const[i,l,r]=e.split("-").map(Number),d=new Date(Date.UTC(i,l-1,r,c-2,o)),u=new Date(d);let n=u.getHours();const p=u.getMinutes().toString().padStart(2,"0"),_=(n>=12?"م":"ص");return n%=12,n=n||12,`${n}:${p} ${_}`}function createMatchHTML(e,t,a){const s=`match-${t}-${a}`,c=e["Team-Left"],o=e["Team-Right"];let i=e["Match-Status"];const l=parseDateFromParts(e["match_date_time"],e["Match-Start-Time"]);let r="--:--";l&&(r=l);const d=null==c.Goal?0:c.Goal,u=null==o.Goal?0:o.Goal;const n=["الشوط الأول","الشوط الثاني","نهاية الشوط الأول"];n.some(e=>i.includes(e))&&(i="جارية الآن"),"انتهت المباراة"===i&&(i="انتهت"),"لم تبدأ"===i&&(i="لم تبدأ بعد");let p="";return"جارية الآن"===i?p="live":"انتهت"===i?p="ended":"تأجلت"===i||"المباراة تأجلت"===i?p="postponed":"لم تبدأ بعد"===i||"بعد قليل"===i?p="upcoming":p="ended","upcoming"===p?`\n          <div class="match" id="${s}" data-match-id="${e["Match-id"]}">\n            <div class="team" title="${c.Name}">\n              <img src="${c.Logo}" alt="${c.Name}" loading="lazy" />\n              <div class="team-name">${c.Name}</div>\n            </div>\n            <div class="center-info">\n              <div class="score">${r}</div>\n              <div class="status ${p}">${i}</div>\n            </div>\n            <div class="team" title="${o.Name}">\n              <img src="${o.Logo}" alt="${o.Name}" loading="lazy" />\n              <div class="team-name">${o.Name}</div>\n            </div>\n          </div>\n        `:`\n        <div class="match" id="${s}" data-match-id="${e["Match-id"]}">\n          <div class="team" title="${c.Name}">\n            <img src="${c.Logo}" alt="${c.Name}" loading="lazy" />\n            <div class="team-name">${c.Name}</div>\n          </div>\n          <div class="center-info">\n            <div class="score">${d} - ${u}</div>\n            <div class="status ${p}">${i}</div>\n          </div>\n          <div class="team" title="${o.Name}">\n            <img src="${o.Logo}" alt="${o.Name}" loading="lazy" />\n            <div class="team-name">${o.Name}</div>\n          </div>\n        </div>\n      `}function createLeagueHTML(e,t){const a=e.Matches.map(((e,a)=>createMatchHTML(e,t,a))).join("");return`\n        <div class="league">\n          <div class="league-header">\n            <img src="${e["Cup-Logo"]}" alt="${e["Cup-Name"]}" />\n            <h2>${e["Cup-Name"]}</h2>\n          </div>\n          ${a}\n        </div>\n      `}async function loadMatches(){try{const e=getLocalDateString(selectedDate),t=await fetch(`${PROXY}${API_URL}?date=${e}`);if(!t.ok)throw new Error("فشل تحميل البيانات");const a=await t.json(),s=document.getElementById("matches-container");if(!a.Leagues||0===a.Leagues.length)return void(s.innerHTML="<p>لا توجد مباريات في هذا التاريخ.</p>");const c=null==currentFocusedMatch?void 0:currentFocusedMatch.id;s.innerHTML=a.Leagues.map(((e,t)=>createLeagueHTML(e,t))).join(""),setTimeout((()=>{initFocusSystem();const e=document.getElementById(c);e&&focusMatch(e)}),100)}catch(e){document.getElementById("matches-container").innerHTML=`<p>حدث خطأ أثناء تحميل البيانات: ${e.message}</p>`}}async function loadMatchDetails(e){try{const t=await fetch(`${PROXY}${DETAILS_API_URL}${e}`);if(!t.ok)throw new Error("فشل تحميل تفاصيل المباراة");const a=await t.json();currentMatchDetails=a,renderMatchDetails(a)}catch(e){document.getElementById("modalBody").innerHTML=`\n          <div class="error-message">\n            <p>حدث خطأ أثناء تحميل تفاصيل المباراة: ${e.message}</p>\n          </div>\n        `}}function renderMatchDetails(e){const t=e["Team-Left"],a=e["Team-Right"],s=e.Match_Info||{},c=e.Lineup||{},o=e.Events||[],i=e.Statistics||[],l=e.Penalty_Shootout||null;let r="upcoming";e["Match-Status"].includes("جارية")?r="live":e["Match-Status"].includes("انتهت")?r="ended":e["Match-Status"].includes("تأجلت")&&(r="postponed");let d=e["Match-Status"];d.includes("الشوط الأول")?d="جارية - الشوط الأول":d.includes("الشوط الثاني")?d="جارية - الشوط الثاني":"انتهت المباراة"===d?d="انتهت":"لم تبدأ"===d&&(d="لم تبدأ بعد");const u=parseDateFromParts(e["match_date_time"],e["Match-Start-Time"])||"غير متوفر";let n=`\n        <div class="match-details-header">\n          <div class="match-teams-container">\n            <div class="match-team">\n              <img src="${t.Logo}" alt="${t.Name}" />\n              <div class="match-team-name">${t.Name}</div>\n            </div>\n            <div class="match-score-container">\n              <div class="match-score">${t.Goal||0} - ${a.Goal||0}</div>\n            </div>\n            <div class="match-team">\n              <img src="${a.Logo}" alt="${a.Name}" />\n              <div class="match-team-name">${a.Name}</div>\n            </div>\n          </div>\n          <div class="match-status-container">\n            <div class="match-status ${r}">${d}</div>\n          </div>\n        </div>\n        <div class="tabs-container">\n          <div class="tab active" data-tab="info"><i class="fas fa-info-circle"></i> المعلومات</div>\n          <div class="tab" data-tab="lineup"><i class="fas fa-users"></i> التشكيلة</div>\n          <div class="tab" data-tab="events"><i class="fas fa-list-ul"></i> الأحداث</div>\n          <div class="tab" data-tab="stats"><i class="fas fa-chart-bar"></i> الإحصائيات</div>\n        </div>\n        <div class="tab-content active" id="info-tab">\n          <div class="match-info-grid">\n            <div class="info-item">\n              <div class="info-label"><i class="fas fa-trophy"></i> البطولة</div>\n              <div class="info-value">${s["البطولة"]||"غير متوفر"}</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label"><i class="fas fa-flag"></i> الجولة</div>\n              <div class="info-value">${s["الجولة"]||"غير متوفر"}</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label"><i class="fas fa-map-marker-alt"></i> الملعب</div>\n              <div class="info-value">${s["ملعب_المباراة"]||"غير متوفر"}</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label"><i class="far fa-calendar-alt"></i> التاريخ</div>\n              <div class="info-value">${s["تاريخ_المباراة"]||"غير متوفر"}</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label"><i class="far fa-clock"></i> الوقت</div>\n              <div class="info-value">${u}</div>\n            </div>\n          </div>\n      `;(s["حكم_الساحة"]||s["حكم_مساعد_1"]||s["حكم_تقنية_الفيديو_1"])&&(n+=`\n          <h4 class="section-title"><i class="fas fa-whistle"></i> طاقم التحكيم</h4>\n          <div class="referees-container">\n            ${s["حكم_الساحة"]?`\n              <div class="referee-item">\n                <span class="referee-role"><i class="fas fa-user-shield"></i> حكم الساحة :</span>\n                <span class="referee-name">${s["حكم_الساحة"]}</span>\n              </div>\n            `:""}\n            ${s["حكم_مساعد_1"]?`\n              <div class="referee-item">\n                <span class="referee-role"><i class="fas fa-user-friends"></i> حكم مساعد 1 :</span>\n                <span class="referee-name">${s["حكم_مساعد_1"]}</span>\n              </div>\n            `:""}\n            ${s["حكم_مساعد_2"]?`\n              <div class="referee-item">\n                <span class="referee-role"><i class="fas fa-user-friends"></i> حكم مساعد 2 :</span>\n                <span class="referee-name">${s["حكم_مساعد_2"]}</span>\n              </div>\n            `:""}\n            ${s["حكم_تقنية_الفيديو_1"]?`\n              <div class="referee-item">\n                <span class="referee-role"><i class="fas fa-video"></i> حكم VAR :</span>\n                <span class="referee-name">${s["حكم_تقنية_الفيديو_1"]}</span>\n              </div>\n            `:""}\n          </div>\n        `);(s["القناة_الناقلة"]||s.المعلق)&&(n+=`\n          <h4 class="section-title"><i class="fas fa-tv"></i> معلومات البث</h4>\n          <div class="match-info-grid">\n            ${s["القناة_الناقلة"]?`\n              <div class="info-item">\n                <div class="info-label"><i class="fas fa-satellite-dish"></i> القناة الناقلة</div>\n                <div class="info-value">${s["القناة_الناقلة"]}</div>\n              </div>\n            `:""}\n            ${s.المعلق?`\n              <div class="info-item">\n                <div class="info-label"><i class="fas fa-microphone-alt"></i> المعلق</div>\n                <div class="info-value">${s.المعلق}</div>\n              </div>\n            `:""}\n          </div>\n        `);n+=`</div>`,(c.Home_Team_Formation||c.Away_Team_Formation)&&(n+=`\n          <div class="tab-content" id="lineup-tab">\n          <h4 class="section-title"><i class="fas fa-chess"></i> التشكيلات</h4>\n          <div class="formations-container">\n            <div class="formation">\n              <div class="formation-title">${t.Name}</div>\n              <div class="formation-value">${c.Home_Team_Formation||"غير متوفر"}</div>\n              ${c.Home_Coach?`\n                <div class="coach-info">\n                  <img src="${c.Home_Coach.image}" alt="${c.Home_Coach.title}" />\n                  <div class="coach-name"><i class="fas fa-user-tie"></i> ${c.Home_Coach.title}</div>\n                </div>\n              `:""}\n            </div>\n            <div class="formation">\n              <div class="formation-title">${a.Name}</div>\n              <div class="formation-value">${c.Away_Team_Formation||"غير متوفر"}</div>\n              ${c.Away_Coach?`\n                <div class="coach-info">\n                  <img src="${c.Away_Coach.image}" alt="${c.Away_Coach.title}" />\n                  <div class="coach-name"><i class="fas fa-user-tie"></i> ${c.Away_Coach.title}</div>\n                </div>\n              `:""}\n            </div>\n          </div>\n        `),c.Home_Lineup&&c.Home_Lineup.length>0&&(n+=`\n          <h4 class="section-title"><i class="fas fa-users"></i> تشكيلة ${t.Name}</h4>\n          <div class="players-list">\n            ${c.Home_Lineup.map((e=>`\n              <div class="player-item">\n                <img src="${e.player.image}" alt="${e.player.title}" />\n                <div class="player-name"><i class="fas fa-user"></i> ${e.player.title}</div>\n                <div class="player-number">${e.player.player_number}</div>\n              </div>\n            `)).join("")}\n          </div>\n        `),c.Away_Lineup&&c.Away_Lineup.length>0&&(n+=`\n          <h4 class="section-title"><i class="fas fa-users"></i> تشكيلة ${a.Name}</h4>\n          <div class="players-list">\n            ${c.Away_Lineup.map((e=>`\n              <div class="player-item">\n                <img src="${e.player.image}" alt="${e.player.title}" />\n                <div class="player-name"><i class="fas fa-user"></i> ${e.player.title}</div>\n                <div class="player-number">${e.player.player_number}</div>\n              </div>\n            `)).join("")}\n          </div>\n        `),n+=`</div>`,o.length>0&&o.filter((e=>""!==e.minute)).length>0&&(n+=`\n            <div class="tab-content" id="events-tab">\n            <div class="match-events-section">\n              <h4 class="section-title"><i class="fas fa-futbol"></i> أحداث المباراة</h4>\n              <div class="events-line">\n                ${o.filter((e=>""!==e.minute)).map((e=>{const t=getEventIcon(e.event_name),a=getEventClass(e.event_name);let s=`\n                    <div class="event-item ${a}">\n                      <div class="event-meta">\n                        <div class="event-time">${e.minute||"ـ"}'</div>\n                        <div class="event-icon">${t}</div>\n                      </div>\n                      <div class="event-content">\n                        <div class="event-main-info">\n                  `;switch(e.event_name){case"هدف":s+=`\n                        <span class="event-player">${e.player_a}</span>\n                        ${e.player_s?`<span class="event-assist">(صناعة: ${e.player_s})</span>`:""}\n                      `;break;case"تبديل لاعب":s+=`\n                        <div class="substitution-container">\n                          <span class="substitution-out">${e.player_a}</span>\n                          <span class="substitution-arrow">→</span>\n                          <span class="substitution-in">${e.player_s}</span>\n                        </div>\n                      `;break;case"بطاقة صفراء":case"بطاقة حمراء":case"ضربة جزاء":s+=`<span class="event-player">${e.player_a}</span>`;break;default:s+=e.event_name}return s+=`\n                        </div>\n                        <div class="event-type">${e.event_name}</div>\n                      </div>\n                    </div>\n                  `})).join("")}\n              </div>\n            </div>\n            </div>\n          `),l&&(l.Team1_Kicks||l.Team2_Kicks)&&(n+=`\n          <h4 class="section-title"><i class="fas fa-crosshairs"></i> ركلات الترجيح</h4>\n          <div class="penalty-shootout">\n            <div class="penalty-teams-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n              <div class="penalty-team-header" style="display: flex; flex-direction: column; align-items: center; margin-right: 10px;">\n                <img src="${t.Logo}" alt="${t.Name}" class="penalty-team-logo" style="width: 50px; height: 50px; margin-bottom: 3px;">\n                <div class="penalty-team-name" style="font-size: 0.9rem; margin-bottom: 3px;">${t.Name}</div>\n                <div class="penalty-score" style="width: 30px; height: 30px; line-height: 30px;">${t["Penalty-Score"]||0}</div>\n              </div>\n              <div class="vs-container" style="margin: 0 5px;">\n                <span class="vs-text">VS</span>\n              </div>\n              <div class="penalty-team-header" style="display: flex; flex-direction: column; align-items: center; margin-left: 10px;">\n                <img src="${a.Logo}" alt="${a.Name}" class="penalty-team-logo" style="width: 50px; height: 50px; margin-bottom: 3px;">\n                <div class="penalty-team-name" style="font-size: 0.9rem; margin-bottom: 3px;">${a.Name}</div>\n                <div class="penalty-score" style="width: 30px; height: 30px; line-height: 30px;">${a["Penalty-Score"]||0}</div>\n              </div>\n            </div>\n            <div class="penalty-kicks-container">\n              <div class="penalty-kicks-column">\n                ${l.Team1_Kicks?l.Team1_Kicks.map(((e,t)=>`\n                  <div class="penalty-kick ${"Scored"===e.outcome?"scored":"missed"}">\n                    <div class="kick-number">${t+1}</div>\n                    <div class="player-info">\n                      <div class="player-avatar-icon">\n                        <i class="fas fa-user"></i>\n                      </div>\n                      <span class="player-name">${e.player_name}</span>\n                    </div>\n                    <div class="kick-result">\n                      ${"Scored"===e.outcome?`<i class="fas fa-check"></i>`:`<i class="fas fa-times"></i>`}\n                    </div>\n                  </div>\n                `)).join(""):""}\n              </div>\n              <div class="penalty-separator"></div>\n              <div class="penalty-kicks-column">\n                ${l.Team2_Kicks?l.Team2_Kicks.map(((e,t)=>`\n                  <div class="penalty-kick ${"Scored"===e.outcome?"scored":"missed"}">\n                    <div class="kick-number">${t+1}</div>\n                    <div class="player-info">\n                      <div class="player-avatar-icon">\n                        <i class="fas fa-user"></i>\n                      </div>\n                      <span class="player-name">${e.player_name}</span>\n                    </div>\n                    <div class="kick-result">\n                      ${"Scored"===e.outcome?`<i class="fas fa-check"></i>`:`<i class="fas fa-times"></i>`}\n                    </div>\n                  </div>\n                `)).join(""):""}\n              </div>\n            </div>\n          </div>\n        `),n+=`</div>`,i.length>0&&(n+=`\n  <div class="tab-content" id="stats-tab">\n    <h4 class="section-title"><i class="fas fa-chart-bar"></i> إحصائيات المباراة</h4>\n    <div class="stats-comparison">\n      <div class="penalty-teams-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n        <div class="penalty-team-header" style="display: flex; flex-direction: column; align-items: center; margin-right: 10px;">\n          <img src="${t.Logo}" alt="${t.Name}" class="penalty-team-logo" style="width: 50px; height: 50px; margin-bottom: 3px;">\n          <div class="penalty-team-name" style="font-size: 0.9rem; margin-bottom: 3px;">${t.Name}</div>\n        </div>\n        <div class="vs-container" style="margin: 0 5px;">\n          <span class="vs-text">VS</span>\n        </div>\n        <div class="penalty-team-header" style="display: flex; flex-direction: column; align-items: center; margin-left: 10px;">\n          <img src="${a.Logo}" alt="${a.Name}" class="penalty-team-logo" style="width: 50px; height: 50px; margin-bottom: 3px;">\n          <div class="penalty-team-name" style="font-size: 0.9rem; margin-bottom: 3px;">${a.Name}</div>\n        </div>\n      </div>\n      <div class="stats-list">\n        ${i.map((e=>{const t=parseFloat(e.Team2_Value)||0,a=parseFloat(e.Team1_Value)||0,s=t+a,c=s>0?t/s*100:50,o=e.Name.includes("استحواذ");return`\n            <div class="stat-item">\n              <div class="stat-row">\n                <div class="stat-value home-value">${t}${o?"%":""}</div>\n                <div class="stat-name">${e.Name}</div>\n                <div class="stat-value away-value">${a}${o?"%":""}</div>\n              </div>\n              <div class="progress-bar-container">\n                <div class="home-progress" style="width: ${c}%"></div>\n                <div class="away-progress" style="width: ${100-c}%"></div>\n              </div>\n            </div>\n          `})).join("")}\n      </div>\n    </div>\n  </div>\n        `),document.getElementById("modalBody").innerHTML=n,setupTabListeners()}function setupTabListeners(){const e=document.querySelectorAll(".tab");e.forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(".tab").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tab-content").forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-tab");document.getElementById(`${t}-tab`).classList.add("active")}))}))}function getEventIcon(e){switch(e){case"هدف":return`<i class="fas fa-futbol goal-icon"></i>`;case"تبديل لاعب":return`<i class="fas fa-exchange-alt sub-icon"></i>`;case"بطاقة صفراء":return`<i class="fas fa-square yellow-card-icon"></i>`;case"بطاقة حمراء":return`<i class="fas fa-square red-card-icon"></i>`;case"ضربة جزاء":return`<i class="fas fa-dot-circle penalty-icon"></i>`;default:return`<i class="fas fa-circle"></i>`}}function getEventClass(e){return e.replace(/\s+/g,"-").toLowerCase()}function showMatchDetails(e){const t=document.getElementById("matchDetailsModal"),a=document.getElementById("modalBody");a.innerHTML=`\n        <div class="loading-details">\n          <div class="loading-spinner"></div>\n          <p>جاري تحميل تفاصيل المباراة</p>\n        </div>\n      `,t.classList.add("active"),loadMatchDetails(e)}function closeModal(){document.getElementById("matchDetailsModal").classList.remove("active")}function initFocusSystem(){matchesList=Array.from(document.querySelectorAll(".match"));if(matchesList.length>0){matchesList.forEach((e=>e.classList.remove("focused")));let e=null;lastFocusedMatchId&&(e=document.getElementById(lastFocusedMatchId)),!e&&matchesList.length>0&&(e=matchesList[0]),e&&focusMatch(e),isFirstFocus=!1}setupEventListeners()}function setupEventListeners(){document.removeEventListener("keydown",handleKeyNavigation),document.addEventListener("keydown",handleKeyNavigation),matchesList.forEach((e=>{e.removeEventListener("mouseenter",handleMouseEnter),e.removeEventListener("click",handleClick),e.addEventListener("mouseenter",handleMouseEnter),e.addEventListener("click",handleClick),e.setAttribute("tabindex","0")})),document.getElementById("closeModal").addEventListener("click",closeModal),document.getElementById("matchDetailsModal").addEventListener("click",(e=>{e.target===document.getElementById("matchDetailsModal")&&closeModal()}))}function handleKeyNavigation(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();const t=currentFocusedMatch?matchesList.indexOf(currentFocusedMatch):0,a="ArrowDown"===e.key?1:-1,s=(t+a+matchesList.length)%matchesList.length;focusMatch(matchesList[s])}else"Enter"===e.key&&currentFocusedMatch&&showMatchDetails(currentFocusedMatch.getAttribute("data-match-id"))}function handleMouseEnter(){focusMatch(this)}function handleClick(){focusMatch(this);const e=this.getAttribute("data-match-id");e&&showMatchDetails(e)}function focusMatch(e){if(e){currentFocusedMatch&&currentFocusedMatch!==e&&currentFocusedMatch.classList.remove("focused"),e.classList.add("focused"),currentFocusedMatch=e,lastFocusedMatchId=e.id;const t={behavior:"smooth",block:"nearest"};isFirstFocus?(setTimeout((()=>e.scrollIntoView(t)),50),isFirstFocus=!1):e.scrollIntoView(t),e.focus()}}document.getElementById("prev-day").addEventListener("click",(()=>{selectedDate.setDate(selectedDate.getDate()-1),updateDateDisplay(),loadMatches()})),document.getElementById("next-day").addEventListener("click",(()=>{selectedDate.setDate(selectedDate.getDate()+1),updateDateDisplay(),loadMatches()})),window.addEventListener("load",(()=>{const e=document.getElementById("splashScreen");e&&(setTimeout((()=>{e.style.opacity="0",e.style.transition="opacity .6s ease",setTimeout((()=>e.style.display="none"),600)}),1200))})),document.getElementById("refreshIcon").addEventListener("click",(function(){const e=this.querySelector("i");e.classList.add("rotate"),setTimeout((()=>{e.classList.remove("rotate"),window.location.href="go:matches"}),600)}));updateDateDisplay(),loadMatches(),setInterval((()=>{loadMatches()}),3e4);</script></body></html>
